<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Clear-netflix-ratings-bookmarklet by jjack</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Clear Netflix Ratings</h1>
          <h2>A bookmarklet that'll help clear your Netflix ratings</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/jjack/clear-netflix-ratings-bookmarklet/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/jjack/clear-netflix-ratings-bookmarklet/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/jjack/clear-netflix-ratings-bookmarklet" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<p>Drag this link (<a href="
javascript: (function (undefined) {

    /* only do stuff on the movie ratings pages */
    if ( !document.URL.match(/movies.netflix.com\/MoviesYouveSeen/) ) {
        return;
    }

    var req = new XMLHttpRequest();
    var movies = document.getElementsByClassName('agMovie');

    for (var i in movies) {
        /* skip over any weird agMovie elements */
        if (typeof movies[i].getElementsByTagName === 'function') {
            var columns = movies[i].getElementsByTagName('td');

            /* skip over any weird columns */
            if (columns[0] == null) {
                continue;
            }

            /* this is probably doomed to fail in the future - anchors 0-5 are star ratings and 'not interested';
               the 6th anchor is the 'clear' url */
            var url = movies[i].getElementsByTagName('td')[1].getElementsByTagName('a')[6].href;
            var title = movies[i].getElementsByTagName('td')[0].textContent;

            var rating;
            if (movies[i].getElementsByTagName('td')[1].textContent.match(/You rated this movie: \d/)) {
                rating = movies[i].getElementsByTagName('td')[1].textContent.match(/You rated this movie: (\d)/)[1];
            } else {
                rating = 'not interested';
            }

            /* actually clear the rating */
            console.log(title + ' (' + rating + ')');
            req.open('GET', url, false);
            req.send(null);
        }
    }

    /* the next page link at the bottom will be disabled on the last page */
    var nextlink = document.getElementsByClassName('next')[0];
    if (nextlink.className.indexOf('next-disabled') == -1) {
        console.log('Going to next page: ' + nextlink.href);
        window.location = nextlink.href;
    } else {
        console.log('complete');
        alert('No more ratings to clear!');
    }
})();
        ">Clear Netflix Ratings</a>) to you bookmarks bar and then go to <a href="http://movies.netflix.com/MoviesYouveSeen">http://movies.netflix.com/MoviesYouveSeen</a>.</p>

<p>Click your new bookmark and it will clear out all of the ratings on the current page will then redirect your browser to the next page of ratings. Repeat this until it notifies you that it has no more ratings to clear.</p>

<p>(Note: due to browser security settings, the bookmarklet is unable to run on multiple pages at once)</p>

<p>Turn on your javascript console to see it in action.</p>

        </section>

        <footer>
          Clear-netflix-ratings-bookmarklet is maintained by <a href="https://github.com/jjack">jjack</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
